- frontpage_fragment_cache("grid_item", listing) do
  .home-fluid-thumbnail-grid-item
    %div
      = love_button(listing, @current_user, 'listing-over')
      %span.love-count
        = Listing.love_count(listing.id)
      -# Listing image
      = render :partial => "layouts/grid_item_listing_image", :locals => {:listing => listing, :modifier_class => ""}

      -# Listing author details
      .home-fluid-thumbnail-grid-author
        .home-fluid-thumbnail-grid-author-avatar
          = link_to(person_path(username: listing.author.username)) do
            = image_tag(listing.author.avatar.thumb || missing_avatar(:thumb), :class => "home-fluid-thumbnail-grid-author-avatar-image")

        - distance = Maybe(listing.distance).or_else(nil)
        - name = PersonViewUtils.person_entity_display_name(listing.author, @current_community.name_display_type)
        = link_to(person_path(username: listing.author.username), :class => "home-fluid-thumbnail-grid-author-name", title: name) do
          = name
        - if (show_distance && !distance.blank?)
          - dist = format_distance(distance)
          - dist_string = "#{dist} #{listing.distance_unit}"
          %span.home-fluid-thumbnail-grid-details-distance{title: dist_string}
            = dist_string
