<div class="section" id="new-listings">
  <div class="container">
    <div class="d-flex justify-content-between">
      <h2 class="section-header">New Listings</h2>
      <a class="view-all-button" href="/s">View All</a>
    </div>
    <div class="grid-container" id="new-listings">
      <% @new_listings.each do |listing| %>
        <div class="grid-item">
          <div class="list-item-card text-decoration-none">
            <div class="list-item-header d-flex justify-content-center">
              <div class="icon">
                <%= link_to(person_path(username: listing.author.username)) do %>
                  <%= image_tag(listing.avatar_thumb, style:'width: 35px; border-radius: 50px') %>
                <% end %>
              </div>
              <div class="created-date">
                <div class="brand-name">
                  <%= link_to(person_path(username: listing.author.username)) do %>
                    <%= listing.author.username %>
                  <% end %>
                </div>
                <div class="days-ago">
                  <%= distance_of_time_in_words(listing.created_at, Time.now) %> ago
                </div>
              </div>
            </div>
            <a href="/listings/<%= listing.slug %>">
              <div class="list-item-card-img" style="background-image: url('<%= listing.get_first_listing_image %>')"></div>
              <div class="list-item-card-body">
                <p class="list-item-card-title"><%= listing.title %></p>
              </div>
              <div class="list-item-card-footer">
                <p class="list-item-card-price"><%= listing.price.nil? ? "Free ": "#{listing.price} $"%></p>
                <p class="list-item-card-pre-price">
                  <del>121,00 $</del>
                </p>
              </div>
            </a>
            <div class="list-item-card-ratings p-0">
              <span class="rating-star"><i class="fas fa-star"></i></span>
              <span class="rating-star"><i class="fas fa-star"></i></span>
              <span class="rating-star"><i class="fas fa-star"></i></span>
              <span class="rating-star"><i class="fas fa-star"></i></span>
              <span class="rating-star"><i class="fas fa-star"></i></span>
              <span class="rating-count">(45)</span>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>

<%= content_for :javascript do %>
<script  type="text/javascript">
    var $ = jQuery;
  setTimeout(function() {
      $(document).ready(function(){
          $('#new-listings').slick({
              dots: true,
              infinite: false,
              speed: 300,
              slidesToShow: 5,
              slidesToScroll: 4,
              responsive: [
                  {
                      breakpoint: 1024,
                      settings: {
                          slidesToShow: 3,
                          slidesToScroll: 3,
                          infinite: true,
                          dots: true
                      }
                  },
                  {
                      breakpoint: 600,
                      settings: {
                          slidesToShow: 2,
                          slidesToScroll: 2
                      }
                  },
                  {
                      breakpoint: 480,
                      settings: {
                          slidesToShow: 1,
                          slidesToScroll: 1
                      }
                  }
              ]
          });
      });
  }, 1500)
</script>
<% end %>
